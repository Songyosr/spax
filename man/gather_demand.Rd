% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/01-gather_functions.R
\name{gather_demand}
\alias{gather_demand}
\title{Calculate demand captured by each service site}
\usage{
gather_demand(demand, weights)
}
\arguments{
\item{demand}{SpatRaster representing spatial distribution of demand}

\item{weights}{Multi-layer SpatRaster where:
- Each layer represents one service site
- Values are probability weights (0-1) from distance decay
- Layer names should match site IDs}
}
\value{
data.frame with:
        - location_id: identifier matching weight layer names
        - potential_demand: weighted sum of demand for each site
}
\description{
Specialized version of gather_weighted() for accessibility analysis.
Calculates the potential demand for each service site by applying pre-computed
spatial weights to a demand raster.
}
\examples{
library(terra)

# Load data
u5pd <- read_spax_example("u5pd.tif")
hos_iscr <- read_spax_example("hos_iscr.tif")

# Calculate probability weights using gaussian decay
weights <- calc_decay(
  hos_iscr,
  method = "gaussian",
  sigma = 30
) |>
  calc_normalize(method = "semi") # Normalize to ensure proper probabilities

# Calculate potential demand for each hospital
hospital_demands <- gather_demand(u5pd, weights)
head(hospital_demands)
}
